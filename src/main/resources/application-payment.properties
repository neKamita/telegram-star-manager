# ============================================
# КОНФИГУРАЦИЯ ПЛАТЕЖНЫХ СИСТЕМ
# TelegramStarManager - Payment Configuration
# ============================================

# ============================================
# ОБЩИЕ НАСТРОЙКИ ПЛАТЕЖНОЙ СИСТЕМЫ
# ============================================

# Базовый URL для callback'ов (ОБЯЗАТЕЛЬНО: замените на ваш домен)
payment.general.callback-base-url=${PAYMENT_CALLBACK_BASE_URL:https://yourdomain.com}

# Время жизни платежа в минутах
payment.general.payment-timeout-minutes=${PAYMENT_TIMEOUT_MINUTES:30}

# Максимальное количество попыток обработки
payment.general.max-retry-attempts=${PAYMENT_MAX_RETRY_ATTEMPTS:3}

# Интервал между попытками в минутах
payment.general.retry-interval-minutes=${PAYMENT_RETRY_INTERVAL_MINUTES:5}

# Включить детальное логирование платежей
payment.general.enable-detailed-logging=${PAYMENT_ENABLE_DETAILED_LOGGING:true}

# Секретный ключ для подписи callback'ов (ОБЯЗАТЕЛЬНО: установите уникальный ключ)
payment.general.callback-secret=${PAYMENT_CALLBACK_SECRET}

# ============================================
# НАСТРОЙКИ TON WALLET
# ============================================

# Включить/выключить TON Wallet
payment.ton.enabled=${TON_ENABLED:false}

# API ключ TON Wallet (получить на https://toncenter.com)
payment.ton.api-key=${TON_API_KEY:}

# Секретный ключ TON Wallet
payment.ton.secret-key=${TON_SECRET_KEY:}

# URL API TON
payment.ton.api-url=${TON_API_URL:https://toncenter.com/api/v3}

# URL для webhook'ов TON
payment.ton.webhook-url=${TON_WEBHOOK_URL:}

# Адрес кошелька для получения платежей
payment.ton.wallet-address=${TON_WALLET_ADDRESS:}

# Комиссия сети в процентах
payment.ton.network-fee-percent=${TON_NETWORK_FEE_PERCENT:1.0}

# Testnet режим (true для тестирования)
payment.ton.testnet=${TON_TESTNET:true}

# ============================================
# НАСТРОЙКИ YOOKASSA
# ============================================

# Включить/выключить YooKassa
payment.yookassa.enabled=${YOOKASSA_ENABLED:false}

# Shop ID в YooKassa (получить в личном кабинете)
payment.yookassa.shop-id=${YOOKASSA_SHOP_ID:}

# Секретный ключ YooKassa
payment.yookassa.secret-key=${YOOKASSA_SECRET_KEY:}

# URL API YooKassa
payment.yookassa.api-url=${YOOKASSA_API_URL:https://api.yookassa.ru/v3}

# URL для webhook'ов YooKassa
payment.yookassa.webhook-url=${YOOKASSA_WEBHOOK_URL:}

# Поддерживаемые методы оплаты
payment.yookassa.supported-methods=${YOOKASSA_SUPPORTED_METHODS:bank_card,yoo_money,sberbank,qiwi}

# Автоматическое подтверждение платежей
payment.yookassa.auto-capture=${YOOKASSA_AUTO_CAPTURE:true}

# Таймаут запроса в секундах
payment.yookassa.request-timeout-seconds=${YOOKASSA_REQUEST_TIMEOUT_SECONDS:30}

# Тестовый режим
payment.yookassa.test-mode=${YOOKASSA_TEST_MODE:true}

# ============================================
# НАСТРОЙКИ QIWI
# ============================================

# Включить/выключить QIWI
payment.qiwi.enabled=${QIWI_ENABLED:false}

# Публичный ключ QIWI (получить в p2p.qiwi.com)
payment.qiwi.public-key=${QIWI_PUBLIC_KEY:}

# Секретный ключ QIWI
payment.qiwi.secret-key=${QIWI_SECRET_KEY:}

# URL API QIWI
payment.qiwi.api-url=${QIWI_API_URL:https://api.qiwi.com}

# URL для webhook'ов QIWI
payment.qiwi.webhook-url=${QIWI_WEBHOOK_URL:}

# ID сайта в системе QIWI
payment.qiwi.site-id=${QIWI_SITE_ID:}

# Валюта по умолчанию
payment.qiwi.default-currency=${QIWI_DEFAULT_CURRENCY:RUB}

# Время жизни счета в минутах
payment.qiwi.bill-lifetime-minutes=${QIWI_BILL_LIFETIME_MINUTES:60}

# Комиссия в процентах
payment.qiwi.commission-percent=${QIWI_COMMISSION_PERCENT:2.5}

# ============================================
# НАСТРОЙКИ SBERPAY
# ============================================

# Включить/выключить SberPay
payment.sberpay.enabled=${SBERPAY_ENABLED:false}

# Merchant ID в SberPay (получить в личном кабинете)
payment.sberpay.merchant-id=${SBERPAY_MERCHANT_ID:}

# Секретный ключ SberPay
payment.sberpay.secret-key=${SBERPAY_SECRET_KEY:}

# URL API SberPay
payment.sberpay.api-url=${SBERPAY_API_URL:https://securepayments.sberbank.ru}

# URL для webhook'ов SberPay
payment.sberpay.webhook-url=${SBERPAY_WEBHOOK_URL:}

# Логин для доступа к API
payment.sberpay.api-login=${SBERPAY_API_LOGIN:}

# Пароль для доступа к API
payment.sberpay.api-password=${SBERPAY_API_PASSWORD:}

# Режим тестирования
payment.sberpay.test-mode=${SBERPAY_TEST_MODE:true}

# Валюта по умолчанию (643 = RUB, 840 = USD, 978 = EUR)
payment.sberpay.default-currency-code=${SBERPAY_DEFAULT_CURRENCY_CODE:643}

# Таймаут сессии в минутах
payment.sberpay.session-timeout-minutes=${SBERPAY_SESSION_TIMEOUT_MINUTES:20}

# ============================================
# НАСТРОЙКИ БЕЗОПАСНОСТИ
# ============================================

# Включить проверку IP адресов
payment.security.enable-ip-whitelist=${PAYMENT_SECURITY_ENABLE_IP_WHITELIST:true}

# Разрешенные IP адреса для TON webhook'ов (через запятую)
payment.security.allowed-ips.ton=${PAYMENT_SECURITY_TON_IPS:95.142.46.34,95.142.46.35}

# Разрешенные IP адреса для YooKassa webhook'ов
payment.security.allowed-ips.yookassa=${PAYMENT_SECURITY_YOOKASSA_IPS:185.71.76.0/27,185.71.77.0/27}

# Разрешенные IP адреса для QIWI webhook'ов
payment.security.allowed-ips.qiwi=${PAYMENT_SECURITY_QIWI_IPS:79.142.16.0/20,195.189.100.0/22}

# Разрешенные IP адреса для SberPay webhook'ов
payment.security.allowed-ips.sberpay=${PAYMENT_SECURITY_SBERPAY_IPS:185.71.76.0/27,212.19.125.0/25}

# Максимальное количество запросов в минуту с одного IP
payment.security.rate-limit-per-minute=${PAYMENT_SECURITY_RATE_LIMIT:100}

# Включить Rate Limiting
payment.security.enable-rate-limiting=${PAYMENT_SECURITY_ENABLE_RATE_LIMITING:true}

# ============================================
# НАСТРОЙКИ RETRY И TIMEOUTS
# ============================================

# Таймаут подключения к внешним API (секунды)
payment.timeouts.connection-timeout-seconds=${PAYMENT_CONNECTION_TIMEOUT:10}

# Таймаут чтения от внешних API (секунды)
payment.timeouts.read-timeout-seconds=${PAYMENT_READ_TIMEOUT:30}

# Интервал между повторными попытками (секунды)
payment.retry.initial-interval-seconds=${PAYMENT_RETRY_INITIAL_INTERVAL:2}

# Максимальный интервал между попытками (секунды)
payment.retry.max-interval-seconds=${PAYMENT_RETRY_MAX_INTERVAL:30}

# Множитель для экспоненциального backoff
payment.retry.multiplier=${PAYMENT_RETRY_MULTIPLIER:2.0}

# ============================================
# НАСТРОЙКИ МОНИТОРИНГА
# ============================================

# Включить метрики Micrometer
payment.monitoring.enable-metrics=${PAYMENT_MONITORING_ENABLE_METRICS:true}

# Включить Health Check для платежных систем
payment.monitoring.enable-health-checks=${PAYMENT_MONITORING_ENABLE_HEALTH_CHECKS:true}

# Интервал проверки Health Check (секунды)
payment.monitoring.health-check-interval-seconds=${PAYMENT_MONITORING_HEALTH_CHECK_INTERVAL:300}

# Включить алерты при ошибках
payment.monitoring.enable-alerts=${PAYMENT_MONITORING_ENABLE_ALERTS:true}

# Email для уведомлений об ошибках
payment.monitoring.alert-email=${PAYMENT_MONITORING_ALERT_EMAIL:admin@yourdomain.com}

# ============================================
# НАСТРОЙКИ ЛОГИРОВАНИЯ
# ============================================

# Уровень логирования для платежных операций
logging.level.shit.back.service.PaymentService=${PAYMENT_LOG_LEVEL:INFO}
logging.level.shit.back.controller.PaymentCallbackController=${PAYMENT_CALLBACK_LOG_LEVEL:INFO}

# Включить логирование запросов к внешним API
payment.logging.log-external-requests=${PAYMENT_LOG_EXTERNAL_REQUESTS:true}

# Включить логирование ответов от внешних API
payment.logging.log-external-responses=${PAYMENT_LOG_EXTERNAL_RESPONSES:false}

# Маскировать чувствительные данные в логах
payment.logging.mask-sensitive-data=${PAYMENT_LOG_MASK_SENSITIVE:true}

# ============================================
# НАСТРОЙКИ ДЛЯ РАЗРАБОТКИ (только для DEV)
# ============================================

# Включить mock режим (все платежи будут успешными)
payment.dev.enable-mock-mode=${PAYMENT_DEV_MOCK_MODE:false}

# Задержка для mock платежей (секунды)
payment.dev.mock-delay-seconds=${PAYMENT_DEV_MOCK_DELAY:3}

# Включить дополнительную отладочную информацию
payment.dev.enable-debug=${PAYMENT_DEV_ENABLE_DEBUG:false}

# Пропускать верификацию подписей (ТОЛЬКО ДЛЯ РАЗРАБОТКИ!)
payment.dev.skip-signature-verification=${PAYMENT_DEV_SKIP_VERIFICATION:false}

# ============================================
# НАСТРОЙКИ БАЗЫ ДАННЫХ ДЛЯ ПЛАТЕЖЕЙ
# ============================================

# Размер пула соединений для платежных операций
payment.database.pool-size=${PAYMENT_DB_POOL_SIZE:10}

# Таймаут получения соединения (секунды)
payment.database.connection-timeout-seconds=${PAYMENT_DB_CONNECTION_TIMEOUT:30}

# Максимальное время жизни соединения (минуты)
payment.database.max-lifetime-minutes=${PAYMENT_DB_MAX_LIFETIME:30}

# Интервал очистки истекших платежей (минуты)
payment.database.cleanup-interval-minutes=${PAYMENT_DB_CLEANUP_INTERVAL:60}

# Хранить платежи в БД (дни)
payment.database.retention-days=${PAYMENT_DB_RETENTION_DAYS:90}

# ============================================
# НАСТРОЙКИ CACHE
# ============================================

# Включить кеширование для платежных операций
payment.cache.enabled=${PAYMENT_CACHE_ENABLED:true}

# Время жизни кеша для статусов платежей (секунды)
payment.cache.payment-status-ttl=${PAYMENT_CACHE_STATUS_TTL:300}

# Время жизни кеша для конфигурации (секунды)
payment.cache.config-ttl=${PAYMENT_CACHE_CONFIG_TTL:3600}

# Максимальный размер кеша
payment.cache.max-size=${PAYMENT_CACHE_MAX_SIZE:1000}

# ============================================
# WEBHOOK SETTINGS
# ============================================

# Таймаут обработки webhook'ов (секунды)
payment.webhook.processing-timeout-seconds=${PAYMENT_WEBHOOK_TIMEOUT:30}

# Максимальный размер payload webhook'а (байты)
payment.webhook.max-payload-size=${PAYMENT_WEBHOOK_MAX_PAYLOAD:1048576}

# Включить асинхронную обработку webhook'ов
payment.webhook.enable-async-processing=${PAYMENT_WEBHOOK_ASYNC:true}

# Размер пула потоков для обработки webhook'ов
payment.webhook.thread-pool-size=${PAYMENT_WEBHOOK_THREAD_POOL:5}

# ============================================
# УВЕДОМЛЕНИЯ
# ============================================

# Включить Telegram уведомления администратору
payment.notifications.telegram.enabled=${PAYMENT_NOTIFICATIONS_TELEGRAM_ENABLED:false}

# Bot Token для уведомлений
payment.notifications.telegram.bot-token=${PAYMENT_NOTIFICATIONS_BOT_TOKEN:}

# Chat ID администратора
payment.notifications.telegram.admin-chat-id=${PAYMENT_NOTIFICATIONS_ADMIN_CHAT_ID:}

# Включить email уведомления
payment.notifications.email.enabled=${PAYMENT_NOTIFICATIONS_EMAIL_ENABLED:false}

# SMTP настройки для email уведомлений
spring.mail.host=${PAYMENT_SMTP_HOST:smtp.gmail.com}
spring.mail.port=${PAYMENT_SMTP_PORT:587}
spring.mail.username=${PAYMENT_SMTP_USERNAME:}
spring.mail.password=${PAYMENT_SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true