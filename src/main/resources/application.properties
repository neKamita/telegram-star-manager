# Telegram Bot Configuration
telegram.bot.token=${TELEGRAM_BOT_TOKEN}
telegram.bot.username=${TELEGRAM_BOT_USERNAME}

# Server Configuration
server.port=${SERVER_PORT:8080}

# Logging Configuration
logging.level.shit.back=${LOGGING_LEVEL:INFO}
logging.level.org.telegram=WARN
logging.level.root=${LOGGING_LEVEL:INFO}

# Application Configuration
spring.application.name=TelegramStarManager

# Environment Detection and Profile Activation
spring.profiles.active=${SPRING_PROFILES_ACTIVE:development}

# Multi-Profile Configuration Import
spring.config.import[0]=optional:classpath:application-koyeb.properties
spring.config.import[1]=optional:classpath:application-postgresql.properties

# JSON Configuration
spring.jackson.property-naming-strategy=SNAKE_CASE
spring.jackson.default-property-inclusion=NON_NULL

# Management endpoints - Enhanced for connection pool monitoring
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.health.db.enabled=true
management.health.redis.enabled=true

# Spring Configuration
spring.main.allow-circular-references=false

# Security Configuration
security.api.enabled=true
security.api.key=${API_SECRET_KEY}
security.api.header-name=X-API-KEY

security.rate-limit.enabled=true
security.rate-limit.user-requests-per-minute=10
security.rate-limit.api-requests-per-minute=100
security.rate-limit.cleanup-interval=60000

security.validation.enabled=true
security.validation.max-message-length=4096
security.validation.max-callback-data-length=64

security.audit.enabled=true
security.audit.log-level=INFO
security.audit.log-sensitive-data=false

security.cors.enabled=true
security.cors.allowed-origins=http://localhost:3000,http://localhost:8080
security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
security.cors.allowed-headers=Content-Type,Authorization,X-API-KEY
security.cors.max-age=3600

# Feature Flags Configuration
feature-flags.enabled=true
feature-flags.redis.enabled=true
feature-flags.cache.enabled=true
feature-flags.cache.ttl=300
feature-flags.events.enabled=true
feature-flags.admin.enabled=true

# Spring Cache Configuration
spring.cache.type=simple
spring.cache.cache-names=admin_performance,admin_recent_activity,admin_dashboard_cache
spring.cache.caffeine.spec=maximumSize=100,expireAfterWrite=5m

# Async Configuration for better performance
spring.task.execution.pool.core-size=2
spring.task.execution.pool.max-size=4
spring.task.execution.pool.queue-capacity=25
spring.task.execution.thread-name-prefix=async-
spring.task.scheduling.pool.size=2

# H2 Database Configuration
spring.datasource.url=jdbc:h2:file:./data/featureflags;DB_CLOSE_DELAY=-1
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# H2 Console (for development)
spring.h2.console.enabled=${H2_CONSOLE_ENABLED:false}
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# Redis Configuration (optional) - Using Lettuce client
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
# Use Lettuce connection pool (default for Spring Boot 2.x+)
spring.data.redis.lettuce.pool.max-active=4
spring.data.redis.lettuce.pool.max-wait=-1ms
spring.data.redis.lettuce.pool.max-idle=2
spring.data.redis.lettuce.pool.min-idle=0
